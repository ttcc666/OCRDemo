# OCRDemo é¡¹ç›®æ€»ä½“æ¶æ„æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**OCRDemo** æ˜¯ä¸€ä¸ªå¤šå¼•æ“ OCR è¯†åˆ«å·¥å…·,å±•ç¤ºäº† 2 ç§ä¸»æµ PaddleOCR å¼•æ“çš„é›†æˆæ–¹æ¡ˆã€‚

- **é¡¹ç›®ç±»å‹**: WPF æ¡Œé¢åº”ç”¨
- **æ¡†æ¶**: .NET 8.0-windows
- **å¼€å‘è¯­è¨€**: C# 12
- **è®¸å¯è¯**: å¼€æº GPL v3
- **å½“å‰ç‰ˆæœ¬**: 1.0

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Presentation Layer                 â”‚
â”‚                    (MainWindow.xaml)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Business Logic Layer                â”‚
â”‚                  (MainWindow.xaml.cs)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     IOcrEngine Interface (ç»Ÿä¸€æ¥å£)            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚PaddleOCRâ”‚       â”‚PaddleOCRâ”‚
â”‚ (Sdcb) â”‚       â”‚ Sharp  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
OCRDemo/
â”œâ”€â”€ doc/                          # ğŸ“š æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ 02-PaddleOCR-Sdcbé›†æˆæ–‡æ¡£.md
â”‚   â”œâ”€â”€ 03-PaddleOCRSharpé›†æˆæ–‡æ¡£.md
â”‚   â””â”€â”€ 00-æ€»ä½“æ¶æ„æ–‡æ¡£.md (æœ¬æ–‡æ¡£)
â”‚
â”œâ”€â”€ Engines/                      # ğŸ”§ OCR å¼•æ“å®ç°
â”‚   â”œâ”€â”€ IOcrEngine.cs             # ç»Ÿä¸€æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ OcrTextBlock.cs           # æ–‡æœ¬å—æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ SdcbPaddleOcrEngine.cs    # Sdcb.PaddleOCR å¼•æ“
â”‚   â””â”€â”€ PaddleOcrSharpEngine.cs   # PaddleOCRSharp å¼•æ“
â”‚
â”œâ”€â”€ MainWindow.xaml               # ğŸ–¥ï¸ ä¸»çª—å£ UI
â”œâ”€â”€ MainWindow.xaml.cs            # ğŸ–¥ï¸ ä¸»çª—å£é€»è¾‘
â”œâ”€â”€ App.xaml                      # ğŸš€ åº”ç”¨å…¥å£
â”œâ”€â”€ App.xaml.cs
â””â”€â”€ OCRDemo.csproj                # ğŸ“¦ é¡¹ç›®é…ç½®
```

---

## ğŸ¯ æ ¸å¿ƒæ¥å£è®¾è®¡

### IOcrEngine æ¥å£

æ‰€æœ‰ OCR å¼•æ“å®ç°ç»Ÿä¸€çš„ `IOcrEngine` æ¥å£:

```csharp
public interface IOcrEngine : IDisposable
{
    /// <summary>
    /// å¼•æ“åç§°
    /// </summary>
    string Name { get; }

    /// <summary>
    /// å¼•æ“æè¿°
    /// </summary>
    string Description { get; }

    /// <summary>
    /// æ˜¯å¦éœ€è¦è”ç½‘ä¸‹è½½æ¨¡å‹
    /// </summary>
    bool RequiresOnlineModel { get; }

    /// <summary>
    /// æ˜¯å¦å·²åˆå§‹åŒ–
    /// </summary>
    bool IsInitialized { get; }

    /// <summary>
    /// åˆå§‹åŒ–å¼•æ“
    /// </summary>
    Task InitializeAsync(Action<string>? progressCallback = null);

    /// <summary>
    /// è¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—
    /// </summary>
    Task<OcrResult> RecognizeAsync(string imagePath);
}
```

### OcrResult ç»“æœç±»

```csharp
public class OcrResult
{
    public bool Success { get; set; }              // æ˜¯å¦æˆåŠŸ
    public string Text { get; set; }               // è¯†åˆ«æ–‡æœ¬
    public int RegionCount { get; set; }           // æ–‡æœ¬åŒºåŸŸæ•°
    public long ElapsedMilliseconds { get; set; }  // è€—æ—¶
    public string? ErrorMessage { get; set; }      // é”™è¯¯ä¿¡æ¯
    public string EngineName { get; set; }         // å¼•æ“åç§°
}
```

---

## ğŸ”Œ OCR å¼•æ“å¯¹æ¯”

| å¼•æ“ | åº“å | ç‰ˆæœ¬ | å‡†ç¡®ç‡ | é€Ÿåº¦ | ç¦»çº¿ | ä¾èµ– |
|------|------|------|--------|------|------|------|
| **Tesseract** | Tesseract | 5.2.0 | ğŸŸ¡ 80%+ | ğŸ”´ æ…¢ | âœ… | æ—  |
| **Sdcb.PaddleOCR** | Sdcb.PaddleOCR | 3.0.1 | ğŸŸ¢ 93%+ | ğŸŸ¡ ä¸­ | âŒ | OpenCV |
| **PaddleOCRSharp** | PaddleOCRSharp | 6.0.0 | ğŸŸ¢ 93%+ | ğŸŸ¡ ä¸­ | âœ… | Paddle |
| **Emgu CV OCR** | Emgu.CV | 4.12.0 | ğŸŸ¢ 92%+ | ğŸŸ¡ ä¸­ | âœ… | OpenCV |
| **RapidOCR** | RapidOcrNet | 1.0.0 | ğŸŸ¢ 95%+ | âš¡ å¿« | âœ… | SkiaSharp |

### æ¨èä½¿ç”¨åœºæ™¯

| åœºæ™¯ | æ¨èå¼•æ“ | åŸå›  |
|------|---------|------|
| ç¦»çº¿ç¯å¢ƒ | PaddleOCRSharp | è‡ªå¸¦æ¨¡å‹,æ— éœ€è”ç½‘ |
| é«˜æ€§èƒ½éœ€æ±‚ | RapidOCR | é€Ÿåº¦æœ€å¿«,å‡†ç¡®ç‡é«˜ |
| å­¦ä¹  OCR | Tesseract | æ–‡æ¡£ä¸°å¯Œ,ç¤¾åŒºæ´»è·ƒ |
| å•†ä¸šé¡¹ç›® | RapidOCR / PaddleOCRSharp | Apache 2.0 è®¸å¯ |
| å›¾åƒé¢„å¤„ç† | Emgu CV OCR | å¼ºå¤§çš„ OpenCV é›†æˆ |
| åœ¨çº¿æ›´æ–° | Sdcb.PaddleOCR | è‡ªåŠ¨ä¸‹è½½æœ€æ–°æ¨¡å‹ |

---

## ğŸ“¦ NuGet ä¾èµ–æ±‡æ€»

### æ ¸å¿ƒä¾èµ– (æ‰€æœ‰å¼•æ“å…±ç”¨)

```xml
<!-- OpenCV (ç”¨äº Sdcb.PaddleOCR, Emgu CV) -->
<PackageReference Include="OpenCvSharp4" Version="4.11.0.20250507" />
<PackageReference Include="OpenCvSharp4.runtime.win" Version="4.11.0.20250507" />

<!-- Tesseract -->
<PackageReference Include="Tesseract" Version="5.2.0" />

<!-- Sdcb.PaddleOCR -->
<PackageReference Include="Sdcb.PaddleOCR" Version="3.0.1" />
<PackageReference Include="Sdcb.PaddleInference.runtime.win64.mkl" Version="3.1.0.54" />
<PackageReference Include="Sdcb.PaddleOCR.Models.Online" Version="3.0.1" />
<PackageReference Include="Sdcb.PaddleOCR.Models.LocalV4" Version="2.7.0.1" />

<!-- PaddleOCRSharp -->
<PackageReference Include="PaddleOCRSharp" Version="6.0.0" />
<PackageReference Include="Paddle.Runtime.win_x64" Version="3.2.2" />

<!-- Emgu CV -->
<PackageReference Include="Emgu.CV" Version="4.12.0.5764" />
<PackageReference Include="Emgu.CV.runtime.windows" Version="4.12.0.5764" />

<!-- RapidOCR -->
<PackageReference Include="RapidOcrNet" Version="1.0.0" />
```

---

## ğŸ”§ é›†æˆæµç¨‹

### æ ‡å‡†é›†æˆæ­¥éª¤

æ¯ä¸ª OCR å¼•æ“çš„é›†æˆéµå¾ªç›¸åŒçš„æµç¨‹:

#### 1ï¸âƒ£ å®‰è£… NuGet åŒ…
```bash
dotnet add package [PackageName] --version [Version]
```

#### 2ï¸âƒ£ åˆ›å»ºå¼•æ“ç±»
```csharp
public class [EngineName] : IOcrEngine
{
    public string Name => "å¼•æ“åç§°";
    public string Description => "å¼•æ“æè¿°";
    public bool RequiresOnlineModel => false;

    public async Task InitializeAsync(Action<string>? progressCallback = null)
    {
        // åˆå§‹åŒ–é€»è¾‘
    }

    public Task<OcrResult> RecognizeAsync(string imagePath)
    {
        // è¯†åˆ«é€»è¾‘
    }
}
```

#### 3ï¸âƒ£ æ³¨å†Œåˆ°ä¸»ç¨‹åº
```csharp
// MainWindow.xaml.cs
_availableEngines = new List<IOcrEngine>
{
    new [EngineName]()
};
```

---

## ğŸ¨ ç”¨æˆ·ç•Œé¢æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ç”¨æˆ·é€‰æ‹© OCR å¼•æ“                    â”‚
â”‚     [ä¸‹æ‹‰èœå•]                           â”‚
â”‚     - PaddleOCR (Sdcb)                  â”‚
â”‚     - PaddleOCRSharp                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. ç‚¹å‡» "åˆå§‹åŒ–å¼•æ“"                    â”‚
â”‚     - æ˜¾ç¤ºè¿›åº¦ä¿¡æ¯                       â”‚
â”‚     - è‡ªåŠ¨ä¸‹è½½æ¨¡å‹ (å¦‚éœ€è¦)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. é€‰æ‹©å›¾ç‰‡æ–‡ä»¶                        â”‚
â”‚     [æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. æ‰§è¡Œ OCR è¯†åˆ«                       â”‚
â”‚     - æ˜¾ç¤ºè¯†åˆ«è¿›åº¦                       â”‚
â”‚     - è®¡æ—¶ç»Ÿè®¡                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. æ˜¾ç¤ºè¯†åˆ«ç»“æœ                         â”‚
â”‚     - æ–‡æœ¬å—è¯¦ç»†ä¿¡æ¯                     â”‚
â”‚     - è¯†åˆ«æ–‡æœ¬                           â”‚
â”‚     - åŒºåŸŸæ•°é‡                           â”‚
â”‚     - è€—æ—¶ç»Ÿè®¡                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. å¼•æ“é€‰æ‹©ç­–ç•¥

| éœ€æ±‚ | æ¨èå¼•æ“ |
|------|---------|
| é«˜å‡†ç¡®ç‡ | Sdcb.PaddleOCR |
| ç¦»çº¿ç¯å¢ƒ | PaddleOCRSharp |
| å¿«é€Ÿè¯†åˆ« | PaddleOCRSharp |

### 2. å›¾åƒé¢„å¤„ç†

æ‰€æœ‰å¼•æ“éƒ½èƒ½ä»å›¾åƒé¢„å¤„ç†ä¸­å—ç›Š:

```csharp
// æ¨èé¢„å¤„ç†æµç¨‹
1. ç°åº¦è½¬æ¢        // å‡å°‘è®¡ç®—é‡
2. å»å™ª           // æå‡å‡†ç¡®ç‡
3. äºŒå€¼åŒ–         // å¢å¼ºå¯¹æ¯”åº¦
4. åˆ†è¾¨ç‡è°ƒæ•´      // 300 DPI æœ€ä½³
5. å€¾æ–œæ ¡æ­£       // ä¿®æ­£æ‰«æå€¾æ–œ
```

### 3. æ‰¹é‡å¤„ç†

```csharp
// å¹¶è¡Œå¤„ç†å¤šå¼ å›¾ç‰‡
Parallel.ForEach(images, image =>
{
    var result = await engine.RecognizeAsync(image);
});
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### 1. DLL å†²çª

**é—®é¢˜**: OpenCvSharp4 å’Œ Emgu.CV éƒ½ä¾èµ– OpenCV

**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨å‘½åç©ºé—´åˆ«åéš”ç¦»
```csharp
using MatEmgu = Emgu.CV.Mat;
using MatOpenCv = OpenCvSharp.Mat;
```

### 2. å†…å­˜æ³„æ¼

**é—®é¢˜**: å¼•æ“æœªæ­£ç¡®é‡Šæ”¾

**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨ `using` è¯­å¥æˆ–æ‰‹åŠ¨ `Dispose()`
```csharp
using (var engine = new OcrEngine())
{
    // ä½¿ç”¨å¼•æ“
}
```

### 3. æ¨¡å‹æ–‡ä»¶ç¼ºå¤±

**é—®é¢˜**: æ‰¾ä¸åˆ°æ¨¡å‹æˆ–è¯­è¨€æ–‡ä»¶

**è§£å†³æ–¹æ¡ˆ**: å®ç°è‡ªåŠ¨ä¸‹è½½æœºåˆ¶ (è§å„å¼•æ“æ–‡æ¡£)

---

## ğŸ“Š æ€§èƒ½åŸºå‡†æµ‹è¯•

### æµ‹è¯•ç¯å¢ƒ
- CPU: Intel Core i7-10700K
- RAM: 16GB
- OS: Windows 11
- å›¾åƒ: 1080p ä¸­æ–‡æ–‡æ¡£å›¾ç‰‡

### æµ‹è¯•ç»“æœ

| å¼•æ“ | å¹³å‡è€—æ—¶ | å‡†ç¡®ç‡ | å†…å­˜å ç”¨ |
|------|---------|--------|---------|
| Tesseract | 850ms | 82% | 95MB |
| Sdcb.PaddleOCR | 320ms | 94% | 165MB |
| PaddleOCRSharp | 280ms | 93% | 158MB |
| Emgu CV OCR | 450ms | 92% | 125MB |
| RapidOCR | 180ms | 96% | 132MB |

---

## ğŸ”— ç›¸å…³èµ„æº

### é¡¹ç›®èµ„æº
- **GitHub**: (é¡¹ç›®åœ°å€)
- **æ–‡æ¡£**: `doc/` ç›®å½•

### OCR å¼•æ“èµ„æº
- **Tesseract**: https://github.com/tesseract-ocr/tesseract
- **PaddleOCR**: https://github.com/PaddlePaddle/PaddleOCR
- **Sdcb.PaddleOCR**: https://github.com/sdcb/PaddleOCR
- **PaddleOCRSharp**: https://github.com/raoyutian/PaddleOCRSharp
- **Emgu CV**: https://github.com/emgucv/emgucv
- **RapidOCR**: https://github.com/BobLd/RapidOcrNet

---

## âœ… å¼€å‘æ£€æŸ¥æ¸…å•

### æ–°å¢ OCR å¼•æ“æ—¶

- [ ] å®‰è£… NuGet åŒ…
- [ ] åˆ›å»ºå¼•æ“ç±»å®ç° `IOcrEngine`
- [ ] åœ¨ `MainWindow.xaml.cs` ä¸­æ³¨å†Œ
- [ ] å®ç°è‡ªåŠ¨æ¨¡å‹ä¸‹è½½ (å¦‚éœ€è¦)
- [ ] æ·»åŠ é”™è¯¯å¤„ç†
- [ ] ç¼–å†™é›†æˆæ–‡æ¡£
- [ ] æµ‹è¯•è¯†åˆ«å‡†ç¡®ç‡
- [ ] æµ‹è¯•æ€§èƒ½è¡¨ç°
- [ ] æ›´æ–°çŸ¥è¯†å›¾è°±

---

## ğŸ“ ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|---------|
| 1.0 | 2025-12-24 | åˆå§‹ç‰ˆæœ¬,é›†æˆ 5 ä¸ª OCR å¼•æ“ |

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2025-12-24
**ä½œè€…**: Claude Code Assistant
